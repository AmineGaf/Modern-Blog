---
import { Image } from 'astro:assets';

// assets import
import vector2 from '../../../assets/vector2.svg';

//component import
import Post from './news-section-post.astro';

import { getAllPosts } from '../../../sanity/api';

const { posts, categories } = await getAllPosts();
---

<div class="flex flex-col w-full">
  <div
    class="flex flex-col md:flex-row lg:flex-row w-full bg-card md:justify-between md:items-center border-y border-border gap-[30px] py-[40px] px-[16px] md:py-[60px] md:px-[80px]"
  >
    <div class="flex flex-col gap-[10px]">
      <p
        class="text-title py-[4px] px-[8px] rounded-md bg-button w-fit font-inter text-sm"
      >
        Welcome to Our News Hub
      </p>
      <h1 class="text-3xl text-title font-kumbh-sans">
        Discover the World of Headlines
      </h1>
    </div>
    <button
      class="flex bg-background text-desc py-[14px] px-[20px] gap-[4px] border rounded-md border-border font-inter justify-center hover:bg-card"
    >
      View All News
      <Image src={vector2} alt="vector2" class="mt-[6px] w-[13.75px]" />
    </button>
  </div>

  <ul
    class="flex py-[20px] text-xs md:text-lg px-[16px] md:py-[40px] md:px-[80px] gap-[14px] border-b border-border overflow-hidden"
  >
    <li
      class="flex justify-center items-center  text-title py-[18px]  md:py-[24px] md:px-[20px] border border-border rounded-md hover:bg-card cursor-pointer category-item w-full"
      data-category="All"
    >
      All
    </li>
    {
      categories.map((category) => (
        <li
          class="flex justify-center items-center text-title py-5 md:py-[24px] md:px-[20px] border border-border rounded-md hover:bg-card cursor-pointer category-item w-full"
          data-category={category.title}
        >
          {category.title}
        </li>
      ))
    }
  </ul>

  <ul class="flex flex-col font-inter" id="post-list">
    {posts.map((post) => <Post post={post} />)}
  </ul>
</div>

<script src="../js/posts-filtering"></script>
